{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/sx/Documents/React Native/Foren Tech/consumer_latest/screens/Chat.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { GiftedChat, InputToolbar, Bubble, Send, Message } from \"react-native-gifted-chat\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { Toast } from \"native-base\";\nimport Fire from \"./Fire\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport { heightPercentageToDP as hp, widthPercentageToDP as wp } from \"react-native-responsive-screen\";\nimport CameraComponent from \"./Common/Camera\";\nvar recordingSettings = {\n  android: {\n    extension: \".m4a\",\n    outputFormat: Audio.RECORDING_OPTION_ANDROID_OUTPUT_FORMAT_MPEG_4,\n    audioEncoder: Audio.RECORDING_OPTION_ANDROID_AUDIO_ENCODER_AAC,\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000\n  },\n  ios: {\n    extension: \".m4a\",\n    outputFormat: Audio.RECORDING_OPTION_IOS_OUTPUT_FORMAT_MPEG4AAC,\n    audioQuality: Audio.RECORDING_OPTION_IOS_AUDIO_QUALITY_MIN,\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000,\n    linearPCMBitDepth: 16,\n    linearPCMIsBigEndian: false,\n    linearPCMIsFloat: false\n  }\n};\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar SPACING = height / width * 9;\nvar AVATAR_SIZE = height / width * 40;\nvar ITEM_SIZE = AVATAR_SIZE + SPACING * 3;\nimport MessageView from \"./CustomMessageView/MessageView\";\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nvar db = firebase.firestore();\ndb.settings({\n  experimentalForceLongPolling: true\n});\nimport { IMAGES } from \"../assets/Images\";\nimport Popup from \"./Common/Popup\";\nimport { Audio } from \"expo-av\";\nimport BookingDetailHeader from \"./Common/BookingDetailHeader\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport VideoPlayerPopup from \"./CustomMessageView/videoPlayerPopup\";\nimport * as Permissions from \"expo-permissions\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport * as Location from \"expo-location\";\nimport { Camera } from \"expo-camera\";\nimport * as FileSystem from \"expo-file-system\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport { add } from \"react-native-reanimated\";\n\nvar Chat = function Chat(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  var _useState3 = useState(\"en\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lan = _useState4[0],\n      setlan = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isTyping = _useState6[0],\n      setisTyping = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      popupVisible = _useState8[0],\n      setpopupVisible = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isRecording = _useState10[0],\n      setIsRecording = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      recording = _useState12[0],\n      setRecording = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      sound = _useState14[0],\n      setSound = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      playAudio = _useState16[0],\n      setPlayAudio = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      videoSource = _useState18[0],\n      setvideoSource = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      VideoPopup = _useState20[0],\n      setVideoPopup = _useState20[1];\n\n  var _useState21 = useState(\"desc\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      query = _useState22[0],\n      setQuery = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      theaddress = _useState24[0],\n      settheaddress = _useState24[1];\n\n  var updateData = function updateData(data) {\n    console.log(data);\n    alert(\"come back status: \" + data);\n  };\n\n  useEffect(function () {\n    if (props.navigation.state.params.obj) {\n      var obj = props.navigation.state.params.obj;\n      console.log(props.navigation.state.params.obj);\n      var val = {\n        latitude: obj.latitude,\n        longitude: obj.longitude\n      };\n      sendLocationMessage(val);\n    }\n\n    var fun = function fun() {\n      var address, locate;\n      return _regeneratorRuntime.async(function fun$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"tempAddress\"));\n\n            case 2:\n              address = _context.sent;\n              locate = address ? JSON.parse(address) : \"\";\n              settheaddress(locate);\n              console.log(\"Fun Called\");\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fun();\n    console.log(\"user \", props.navigation.state.params.user.customerid.toString());\n    getLan();\n    getGalleryPermissions();\n    var temp = [];\n    db.collection(\"-1\" + props.navigation.state.params.user.customerid.toString()).orderBy(\"timestamp\").onSnapshot(function (snapshot) {\n      snapshot.docChanges().forEach(function (change) {\n        var _id = change.key;\n\n        if (change.doc.data().type == \"text\") {\n          var msg = {\n            _id: change.doc.data()._id,\n            timestamp: change.doc.data().createdAt,\n            text: change.doc.data().text,\n            user: change.doc.data().user,\n            senderId: change.doc.data().senderId,\n            receiverId: change.doc.data().receiverId,\n            senderMobile: change.doc.data().senderMobile,\n            createdAt: change.doc.data().createdAt,\n            type: change.doc.data().type,\n            isDeleted: change.doc.data().isDeleted\n          };\n\n          if (msg.user._id == -1) {\n            msg.user.avatar = require(\"../assets/Profile2-min.png\");\n          } else {\n            msg.user.avatar = require(\"../assets/Profile1-min.png\");\n          }\n\n          setMessages(function (previousMessages) {\n            return GiftedChat.append(previousMessages, msg);\n          });\n        } else if (change.doc.data().type == \"image\") {\n          var _msg = {\n            _id: change.doc.data()._id,\n            timestamp: change.doc.data().createdAt,\n            text: change.doc.data().text,\n            user: change.doc.data().user,\n            senderId: change.doc.data().senderId,\n            receiverId: change.doc.data().receiverId,\n            senderMobile: change.doc.data().senderMobile,\n            createdAt: change.doc.data().createdAt,\n            image: change.doc.data().image,\n            type: change.doc.data().type,\n            isDeleted: change.doc.data().isDeleted\n          };\n\n          if (_msg.user._id == -1) {\n            _msg.user.avatar = require(\"../assets/Profile2-min.png\");\n          } else {\n            _msg.user.avatar = require(\"../assets/Profile1-min.png\");\n          }\n\n          setMessages(function (previousMessages) {\n            return GiftedChat.append(previousMessages, _msg);\n          });\n        } else if (change.doc.data().type == \"audio\") {\n          var _msg2 = {\n            _id: change.doc.data()._id,\n            timestamp: change.doc.data().createdAt,\n            text: change.doc.data().text,\n            user: change.doc.data().user,\n            senderId: change.doc.data().senderId,\n            receiverId: change.doc.data().receiverId,\n            senderMobile: change.doc.data().senderMobile,\n            createdAt: change.doc.data().createdAt,\n            uri: change.doc.data().uri,\n            type: change.doc.data().type,\n            isDeleted: change.doc.data().isDeleted\n          };\n\n          if (_msg2.user._id == -1) {\n            _msg2.user.avatar = require(\"../assets/Profile2-min.png\");\n          } else {\n            _msg2.user.avatar = require(\"../assets/Profile1-min.png\");\n          }\n\n          setMessages(function (previousMessages) {\n            return GiftedChat.append(previousMessages, _msg2);\n          });\n        } else if (change.doc.data().type == \"location\") {\n          var _msg3 = {\n            _id: change.doc.data()._id,\n            timestamp: change.doc.data().createdAt,\n            text: change.doc.data().text,\n            user: change.doc.data().user,\n            senderId: change.doc.data().senderId,\n            receiverId: change.doc.data().receiverId,\n            senderMobile: change.doc.data().senderMobile,\n            createdAt: change.doc.data().createdAt,\n            location: change.doc.data().location,\n            type: change.doc.data().type,\n            isDeleted: change.doc.data().isDeleted\n          };\n\n          if (_msg3.user._id == -1) {\n            _msg3.user.avatar = require(\"../assets/Profile2-min.png\");\n          } else {\n            _msg3.user.avatar = require(\"../assets/Profile1-min.png\");\n          }\n\n          setMessages(function (previousMessages) {\n            return GiftedChat.append(previousMessages, _msg3);\n          });\n        }\n      });\n    }, function (error) {});\n    var d = new Date();\n    var created = d.toISOString();\n    AsyncStorage.getItem(\"lan\", function (err, result) {\n      if (result) {\n        var newArr2 = {\n          _id: 1,\n          text: result == \"en\" ? \"Welcome to Wafarnalak Help care. How can we help you?\" : \"مرحبا بك في مركز خدمة وفرنالك . كيف يمكننا مساعدتك؟\",\n          createdAt: new Date(),\n          isDeleted: false,\n          user: {\n            _id: -1,\n            name: \"Wafarnalak\",\n            avatar: require(\"../assets/Profile2-min.png\")\n          }\n        };\n        var delayInMilliseconds = 2000;\n        setTimeout(function () {\n          setMessages(function (oldArray) {\n            return [newArr2].concat(_toConsumableArray(oldArray));\n          });\n        }, delayInMilliseconds);\n      }\n    });\n    console.log(new Date().getTime().toString());\n  }, [props.navigation]);\n\n  var getGalleryPermissions = function getGalleryPermissions() {\n    var _await$ImagePicker$re, status;\n\n    return _regeneratorRuntime.async(function getGalleryPermissions$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(Platform.OS !== \"web\")) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n          case 3:\n            _await$ImagePicker$re = _context2.sent;\n            status = _await$ImagePicker$re.status;\n\n            if (status !== \"granted\") {\n              alert(\"Sorry, we need camera roll permissions to make this work!\");\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var takePicture = function takePicture() {\n    return _regeneratorRuntime.async(function takePicture$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(\"hello\");\n            props.navigation.navigate(\"CameraComponent\", {\n              onGoBack: uploadImagetofirebaseConsole\n            });\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadImagetofirebaseConsole = function uploadImagetofirebaseConsole(image) {\n    var blob, d, current_time, ref, snapshot;\n    return _regeneratorRuntime.async(function uploadImagetofirebaseConsole$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            console.log(\"hello\", image);\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              var xhr = new XMLHttpRequest();\n\n              xhr.onload = function () {\n                resolve(xhr.response);\n              };\n\n              xhr.onerror = function () {\n                reject(new TypeError(\"network request failed\"));\n              };\n\n              xhr.responseType = \"blob\";\n              xhr.open(\"GET\", image, true);\n              xhr.send(null);\n            }));\n\n          case 3:\n            blob = _context4.sent;\n            d = new Date();\n            current_time = d.toISOString();\n            ref = firebase.storage().ref(\"/chatImages\").child(current_time);\n            snapshot = ref.put(blob);\n            snapshot.on(firebase.storage.TaskEvent.STATE_CHANGED, function () {\n              console.log(\"success\");\n            }, function (error) {\n              console.log(\"error\", error);\n            }, function () {\n              snapshot.snapshot.ref.getDownloadURL().then(function (url) {\n                console.log(\"url\", url);\n                sendImageMessage(url);\n                blob.close();\n              }).catch(function (e) {\n                console.log(\"erreo\", e);\n              });\n            });\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var sendImageMessage = useCallback(function _callee(path) {\n    var id, msg;\n    return _regeneratorRuntime.async(function _callee$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(messageIdGenerator());\n\n          case 2:\n            id = _context5.sent;\n            console.log(\"id > \", id);\n            msg = [{\n              _id: id,\n              createdAt: new Date().getTime(),\n              receiverId: \"-1\",\n              senderId: props.navigation.state.params.user.customerid.toString(),\n              senderMobile: props.navigation.state.params.user.mobile,\n              text: \"\",\n              timestamp: new Date().getTime(),\n              image: path,\n              type: \"image\",\n              user: {\n                _id: props.navigation.state.params.user.customerid,\n                name: props.navigation.state.params.user.name,\n                avatar: require(\"../assets/Profile1-min.png\")\n              },\n              isDeleted: false\n            }];\n            Fire.shared.send(msg);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  });\n\n  var _onSend = useCallback(function () {\n    var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var newArr2 = messages.map(function (v) {\n      return _objectSpread(_objectSpread({}, v), {}, {\n        senderId: props.navigation.state.params.user.customerid.toString(),\n        receiverId: \"-1\",\n        senderMobile: props.navigation.state.params.user.mobile,\n        isDeleted: false,\n        type: \"text\"\n      });\n    });\n    Fire.shared.send(newArr2);\n  }, [props.navigation]);\n\n  function startRecording() {\n    var _await$Permissions$as, audio_status, _recording;\n\n    return _regeneratorRuntime.async(function startRecording$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            if (!(sound !== null)) {\n              _context6.next = 5;\n              break;\n            }\n\n            _context6.next = 3;\n            return _regeneratorRuntime.awrap(sound.unloadAsync());\n\n          case 3:\n            sound.setOnPlaybackStatusUpdate(null);\n            setSound(null);\n\n          case 5:\n            console.log(\"Requesting permissions..\");\n            _context6.next = 8;\n            return _regeneratorRuntime.awrap(Audio.requestPermissionsAsync());\n\n          case 8:\n            _context6.next = 10;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.AUDIO_RECORDING));\n\n          case 10:\n            _await$Permissions$as = _context6.sent;\n            audio_status = _await$Permissions$as.audio_status;\n\n            if (!(audio_status !== \"granted\")) {\n              _context6.next = 16;\n              break;\n            }\n\n            Toast.show({\n              text: lan == \"en\" ? \"Please grant audio permissions\" : \"الرجاء منح أذونات الصوت\",\n              position: \"bottom\"\n            });\n            _context6.next = 16;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.AUDIO_RECORDING));\n\n          case 16:\n            _context6.next = 18;\n            return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n              allowsRecordingIOS: true,\n              interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n              playsInSilentModeIOS: true,\n              shouldDuckAndroid: true,\n              interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n              playThroughEarpieceAndroid: false,\n              staysActiveInBackground: true\n            }));\n\n          case 18:\n            _recording = new Audio.Recording();\n            _context6.prev = 19;\n            _context6.next = 22;\n            return _regeneratorRuntime.awrap(_recording.prepareToRecordAsync(recordingSettings));\n\n          case 22:\n            setRecording(_recording);\n            _context6.next = 25;\n            return _regeneratorRuntime.awrap(_recording.startAsync());\n\n          case 25:\n            console.log(\"recording\");\n            setIsRecording(true);\n            _context6.next = 32;\n            break;\n\n          case 29:\n            _context6.prev = 29;\n            _context6.t0 = _context6[\"catch\"](19);\n            console.log(\"error while recording:\", _context6.t0);\n\n          case 32:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, [[19, 29]], Promise);\n  }\n\n  function stopRecording() {\n    var info, _await$recording$crea, _sound, status;\n\n    return _regeneratorRuntime.async(function stopRecording$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            _context7.next = 3;\n            return _regeneratorRuntime.awrap(recording.stopAndUnloadAsync());\n\n          case 3:\n            _context7.next = 7;\n            break;\n\n          case 5:\n            _context7.prev = 5;\n            _context7.t0 = _context7[\"catch\"](0);\n\n          case 7:\n            _context7.next = 9;\n            return _regeneratorRuntime.awrap(FileSystem.getInfoAsync(recording.getURI()));\n\n          case 9:\n            info = _context7.sent;\n            console.log(\"FILE INFO: \" + JSON.stringify(info));\n            _context7.next = 13;\n            return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n              allowsRecordingIOS: false,\n              interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n              playsInSilentModeIOS: true,\n              playsInSilentLockedModeIOS: true,\n              shouldDuckAndroid: true,\n              interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n              playThroughEarpieceAndroid: false,\n              staysActiveInBackground: true\n            }));\n\n          case 13:\n            _context7.next = 15;\n            return _regeneratorRuntime.awrap(recording.createNewLoadedSoundAsync({\n              isLooping: true,\n              isMuted: false,\n              volume: 1.0,\n              rate: 1.0,\n              shouldCorrectPitch: true\n            }));\n\n          case 15:\n            _await$recording$crea = _context7.sent;\n            _sound = _await$recording$crea.sound;\n            status = _await$recording$crea.status;\n            setSound(_sound);\n            setIsRecording(false);\n            uploadAudioFirebase(_sound);\n            console.log(\"sound >>> \", _sound);\n\n          case 22:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  }\n\n  var uploadAudioFirebase = function uploadAudioFirebase(url, type, name) {\n    var uri, blob, uriParts, fileType, d, current_time;\n    return _regeneratorRuntime.async(function uploadAudioFirebase$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            uri = recording.getURI();\n            _context9.prev = 1;\n            _context9.next = 4;\n            return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              var xhr = new XMLHttpRequest();\n\n              xhr.onload = function () {\n                try {\n                  resolve(xhr.response);\n                } catch (error) {\n                  console.log(\"error:\", error);\n                }\n              };\n\n              xhr.onerror = function (e) {\n                console.log(e);\n                reject(new TypeError(\"Network request failed\"));\n              };\n\n              xhr.responseType = \"blob\";\n              xhr.open(\"GET\", uri, true);\n              xhr.send(null);\n            }));\n\n          case 4:\n            blob = _context9.sent;\n\n            if (blob != null) {\n              uriParts = uri.split(\".\");\n              fileType = uriParts[uriParts.length - 1];\n              d = new Date();\n              current_time = d.toISOString();\n              firebase.storage().ref(\"/chatAudio\").child(current_time + \".\" + fileType).put(blob, {\n                contentType: \"audio/\" + fileType\n              }).then(function _callee2() {\n                var uri;\n                return _regeneratorRuntime.async(function _callee2$(_context8) {\n                  while (1) {\n                    switch (_context8.prev = _context8.next) {\n                      case 0:\n                        console.log(\"Sent!\");\n                        _context8.next = 3;\n                        return _regeneratorRuntime.awrap(firebase.storage().ref(\"/chatAudio\").child(current_time + \".\" + fileType).getDownloadURL());\n\n                      case 3:\n                        uri = _context8.sent;\n                        sendAudio(uri, \"audio\", \"audio\");\n                        console.log(\"uri:\", uri);\n\n                      case 6:\n                      case \"end\":\n                        return _context8.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }).catch(function (e) {\n                return console.log(\"error:\", e);\n              });\n            } else {\n              console.log(\"erroor with blob\");\n            }\n\n            _context9.next = 11;\n            break;\n\n          case 8:\n            _context9.prev = 8;\n            _context9.t0 = _context9[\"catch\"](1);\n            console.log(\"error:\", _context9.t0);\n\n          case 11:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  };\n\n  var sendAudio = useCallback(function _callee3(path, type, name) {\n    var id, msg;\n    return _regeneratorRuntime.async(function _callee3$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.next = 2;\n            return _regeneratorRuntime.awrap(messageIdGenerator());\n\n          case 2:\n            id = _context10.sent;\n            msg = [{\n              _id: id,\n              createdAt: new Date().getTime().toString(),\n              receiverId: \"-1\",\n              senderId: props.navigation.state.params.user.customerid.toString(),\n              senderMobile: props.navigation.state.params.user.mobile,\n              text: \"\",\n              name: name,\n              timestamp: new Date().getTime().toString(),\n              uri: path,\n              type: type,\n              user: {\n                _id: props.navigation.state.params.user.customerid,\n                name: props.navigation.state.params.user.name,\n                avatar: require(\"../assets/Profile1-min.png\")\n              },\n              isDeleted: false\n            }];\n            Fire.shared.send(msg);\n\n          case 5:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  });\n\n  var pickImage = function pickImage() {\n    var _await$Permissions$as2, cameraPermission, _await$Permissions$as3, cameraRollPermission, _await$Camera$request, status, _await$Permissions$as4, imageLibrary, permissionResult, result;\n\n    return _regeneratorRuntime.async(function pickImage$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n          case 2:\n            _await$Permissions$as2 = _context11.sent;\n            cameraPermission = _await$Permissions$as2.status;\n            _context11.next = 6;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n          case 6:\n            _await$Permissions$as3 = _context11.sent;\n            cameraRollPermission = _await$Permissions$as3.status;\n            _context11.next = 10;\n            return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n          case 10:\n            _await$Camera$request = _context11.sent;\n            status = _await$Camera$request.status;\n            _context11.next = 14;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.MEDIA_LIBRARY));\n\n          case 14:\n            _await$Permissions$as4 = _context11.sent;\n            imageLibrary = _await$Permissions$as4.status;\n            _context11.next = 18;\n            return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n          case 18:\n            permissionResult = _context11.sent;\n            console.log(permissionResult, \"permissionResult\");\n\n            if (!(permissionResult.status == \"granted\")) {\n              _context11.next = 26;\n              break;\n            }\n\n            _context11.next = 23;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n          case 23:\n            result = _context11.sent;\n            console.log(\"pickerResult \", result);\n\n            if (!result.cancelled) {\n              if (result.type == \"image\") {\n                uploadImagetofirebaseConsole(result.uri);\n              } else if (result.type == \"video\") {\n                sendVideoMsg(result.uri);\n              }\n            }\n\n          case 26:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var sendVideoMsg = useCallback(function _callee4(path) {\n    var id, msg;\n    return _regeneratorRuntime.async(function _callee4$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.next = 2;\n            return _regeneratorRuntime.awrap(messageIdGenerator());\n\n          case 2:\n            id = _context12.sent;\n            console.log(\"id > \", id);\n            msg = {\n              _id: id,\n              createdAt: new Date().getTime(),\n              receiverId: \"-1\",\n              senderId: props.navigation.state.params.user.customerid.toString(),\n              senderMobile: props.navigation.state.params.user.mobile,\n              text: \"\",\n              timestamp: new Date().getTime(),\n              video: path,\n              user: {\n                _id: props.navigation.state.params.user.customerid,\n                name: props.navigation.state.params.user.name,\n                avatar: require(\"../assets/Profile1-min.png\")\n              }\n            };\n            setMessages(function (previousMessages) {\n              return GiftedChat.append(previousMessages, msg);\n            });\n\n          case 6:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  });\n\n  var getLan = function getLan() {\n    var lan;\n    return _regeneratorRuntime.async(function getLan$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"lan\"));\n\n          case 2:\n            lan = _context13.sent;\n            setlan(lan !== null ? lan : \"en\");\n\n          case 4:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var messageIdGenerator = function messageIdGenerator() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == \"x\" ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  };\n\n  var renderInputToolbar = function renderInputToolbar(props) {\n    return React.createElement(InputToolbar, _extends({}, props, {\n      containerStyle: {\n        backgroundColor: \"white\",\n        borderTopWidth: hp(0.2)\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 942,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  var _sendLocation = function sendLocation() {\n    var _await$Permissions$as5, status, val;\n\n    return _regeneratorRuntime.async(function sendLocation$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            _context14.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n          case 2:\n            _await$Permissions$as5 = _context14.sent;\n            status = _await$Permissions$as5.status;\n            console.log(\"status \", status);\n\n            if (status !== \"granted\") {\n              Toast.show({\n                text: lan == \"en\" ? \"Please allow location permission\" : \"يرجى السماح بإذن الموقع\",\n                position: \"bottom\"\n              });\n            } else {\n              props.navigation.navigate(\"GoogleMapScreen\", {\n                lan: \"en\",\n                chat: \"true\"\n              });\n              console.log(\"after navigate\");\n              val = {\n                latitude: theaddress.latitude,\n                longitude: theaddress.longitude\n              };\n              console.log(\"If\", theaddress);\n            }\n\n          case 6:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var sendLocationMessage = function sendLocationMessage(location) {\n    var id, msg;\n    return _regeneratorRuntime.async(function sendLocationMessage$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.next = 2;\n            return _regeneratorRuntime.awrap(messageIdGenerator());\n\n          case 2:\n            id = _context15.sent;\n            msg = [{\n              _id: id,\n              createdAt: new Date().getTime().toString(),\n              receiverId: \"-1\",\n              senderId: props.navigation.state.params.user.customerid.toString(),\n              senderMobile: props.navigation.state.params.user.mobile,\n              text: \"\",\n              name: \"location\",\n              timestamp: new Date().getTime().toString(),\n              location: location,\n              type: \"location\",\n              user: {\n                _id: props.navigation.state.params.user.customerid,\n                name: props.navigation.state.params.user.name,\n                avatar: require(\"../assets/Profile1-min.png\")\n              },\n              isDeleted: false\n            }];\n            Fire.shared.send(msg);\n\n          case 5:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var renderBubble = function renderBubble(props) {\n    return React.createElement(Bubble, _extends({}, props, {\n      textStyle: {\n        left: {\n          color: \"#4a4b4c\"\n        },\n        right: {\n          color: \"white\"\n        }\n      },\n      wrapperStyle: {\n        left: {\n          backgroundColor: \"#d6d6d6\",\n          borderRadius: 10,\n          borderColor: \"#c9c9c9\"\n        },\n        right: {\n          backgroundColor: \"#631255\",\n          borderBottomRightRadius: 10,\n          borderTopRightRadius: 10,\n          borderRadius: 10\n        }\n      },\n      tickStyle: {\n        color: \"white\",\n        height: 20\n      },\n      timeTextStyle: {\n        left: {\n          color: \"#8b8d8f\",\n          alignSelf: \"flex-end\"\n        },\n        right: {\n          color: \"#8b8d8f\"\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1101,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  function renderLoading() {\n    return React.createElement(View, {\n      style: styles.loadingContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1138,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#6646ee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1139,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  function renderActions(props) {\n    return React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 7\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: {\n        justifyContent: \"flex-start\"\n      },\n      onPress: function onPress() {\n        return onPressActionButton();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1147,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 30,\n        height: 50,\n        alignSelf: \"center\",\n        marginLeft: wp(1),\n        marginTop: -20\n      },\n      resizeMode: \"contain\",\n      source: require(\"../assets/Add-min.png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1151,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1164,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: {\n        justifyContent: \"flex-start\"\n      },\n      onPress: isRecording ? stopRecording : startRecording,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1165,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 30,\n        height: 50,\n        alignSelf: \"center\",\n        marginLeft: wp(2),\n        marginTop: -20,\n        tintColor: isRecording ? \"red\" : \"black\"\n      },\n      resizeMode: \"contain\",\n      source: IMAGES.MIC,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1169,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n  function onPressActionButton(props) {\n    setpopupVisible(true);\n  }\n\n  function renderTicks(currentMessage) {\n    if (currentMessage.user._id === 1) {\n      return React.createElement(View, {\n        style: {\n          flexDirection: \"row\",\n          alignSelf: \"center\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          paddingRight: 5,\n          paddingBottom: 5\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1195,\n          columnNumber: 9\n        }\n      }, React.createElement(Image, {\n        source: IMAGES.CHECKED,\n        resizeMode: \"contain\",\n        style: {\n          width: 10,\n          height: 10,\n          tintColor: \"white\",\n          alignSelf: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n\n  function renderFooter(props) {\n    if (isTyping == true) {\n      return React.createElement(View, {\n        style: {\n          backgroundColor: \"#d6d6d6\",\n          marginBottom: hp(2),\n          borderRadius: 25,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          paddingHorizontal: \"5%\",\n          width: \"50%\",\n          alignSelf: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1227,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: \"center\",\n          color: \"#8b8d8f\",\n          paddingVertical: \"5%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1239,\n          columnNumber: 11\n        }\n      }, \"Wafarnalak is typing...\"));\n    } else {\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1251,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n\n  function renderSend(props) {\n    return React.createElement(Send, _extends({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1256,\n        columnNumber: 7\n      }\n    }), React.createElement(View, {\n      style: {\n        height: \"100%\",\n        width: 50,\n        padding: 5,\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1257,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      source: lan == \"en\" ? IMAGES.SEND_ICON : IMAGES.SEND_ICON_AR,\n      resizeMode: \"contain\",\n      style: {\n        height: 40,\n        width: 40,\n        alignSelf: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1266,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  var renderMessageVideo = function renderMessageVideo(props) {\n    var currentMessage = props.currentMessage;\n    return React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        setvideoSource(currentMessage.video);\n        setVideoPopup(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1278,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: {\n        padding: 10,\n        height: 110,\n        width: 190\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1284,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: currentMessage.video\n      },\n      style: {\n        height: 98,\n        width: 170\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1285,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  var renderCustomView = function renderCustomView(props) {\n    return React.createElement(MessageView, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1302,\n        columnNumber: 12\n      }\n    }));\n  };\n\n  var scrollToBottomComponent = function scrollToBottomComponent(props) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1309,\n        columnNumber: 7\n      }\n    }, React.createElement(AntDesign, {\n      name: \"down\",\n      size: 24,\n      color: \"black\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1317,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  var renderMessage = function renderMessage(props) {\n    if (props.currentMessage.isDeleted == false) {\n      return React.createElement(Message, _extends({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1339,\n          columnNumber: 14\n        }\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      flex: 1,\n      backgroundColor: \"white\",\n      marginTop: StatusBar.statusBarHeight\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1346,\n      columnNumber: 5\n    }\n  }, React.createElement(Popup, {\n    visible: popupVisible,\n    setPopupFalse: function setPopupFalse() {\n      return setpopupVisible(false);\n    },\n    sendLocation: function sendLocation() {\n      setpopupVisible(false);\n\n      _sendLocation();\n    },\n    pickDocument: function pickDocument() {\n      setpopupVisible(false);\n      pickImage();\n    },\n    uploadPicture: function uploadPicture() {\n      setpopupVisible(false);\n      pickImage();\n    },\n    setTakePicture: function setTakePicture() {\n      setpopupVisible(false);\n      takePicture();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1353,\n      columnNumber: 7\n    }\n  }), React.createElement(BookingDetailHeader, {\n    HeaderText: lan == \"en\" ? \"Chat\" : \"محادثة\",\n    onBackPress: function onBackPress() {\n      return props.navigation.state.params.noGoBackLogin ? props.navigation.navigate(\"LandingSecreen\") : props.navigation.goBack();\n    },\n    lan: lan,\n    lineWidth: hp(0.2),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1373,\n      columnNumber: 7\n    }\n  }), React.createElement(VideoPlayerPopup, {\n    visible: VideoPopup,\n    setPopupFalse: function setPopupFalse() {\n      return setVideoPopup(false);\n    },\n    source: videoSource,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1383,\n      columnNumber: 7\n    }\n  }), React.createElement(GiftedChat, _extends({}, props, {\n    messages: messages,\n    onSend: function onSend(messages) {\n      return _onSend(messages);\n    },\n    user: {\n      _id: props.navigation.state.params.user.customerid,\n      name: props.navigation.state.params.user.name,\n      avatar: require(\"../assets/Profile1-min.png\")\n    },\n    placeholder: lan == \"en\" ? \" Write a new message...\" : \"        اكتب رسالة جديدة...       \",\n    textInputStyle: {\n      justifyContent: \"center\",\n      backgroundColor: \"white\"\n    },\n    listViewProps: {\n      style: {\n        backgroundColor: \"#ebebeb\"\n      }\n    },\n    renderMessageVideo: renderMessageVideo,\n    renderCustomView: renderCustomView,\n    renderBubble: renderBubble,\n    renderMessage: renderMessage,\n    showUserAvatar: true,\n    showAvatarForEveryMessage: true,\n    renderUsernameOnMessage: true,\n    alwaysShowSend: true,\n    scrollToBottom: true,\n    scrollToBottomComponent: scrollToBottomComponent,\n    renderLoading: renderLoading,\n    isAnimated: true,\n    renderSend: renderSend,\n    renderActions: renderActions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1388,\n      columnNumber: 7\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  senderName: {\n    color: \"white\",\n    fontSize: 15,\n    fontWeight: \"bold\"\n  },\n  onlineText: {\n    color: \"#a2a2a2\",\n    marginLeft: 3,\n    fontSize: 12\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  bottomComponentContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});\nexport default Chat;","map":{"version":3,"sources":["/Users/sx/Documents/React Native/Foren Tech/consumer_latest/screens/Chat.js"],"names":["React","useState","useCallback","useEffect","GiftedChat","InputToolbar","Bubble","Send","Message","AsyncStorage","Toast","Fire","Ionicons","heightPercentageToDP","hp","widthPercentageToDP","wp","CameraComponent","recordingSettings","android","extension","outputFormat","Audio","RECORDING_OPTION_ANDROID_OUTPUT_FORMAT_MPEG_4","audioEncoder","RECORDING_OPTION_ANDROID_AUDIO_ENCODER_AAC","sampleRate","numberOfChannels","bitRate","ios","RECORDING_OPTION_IOS_OUTPUT_FORMAT_MPEG4AAC","audioQuality","RECORDING_OPTION_IOS_AUDIO_QUALITY_MIN","linearPCMBitDepth","linearPCMIsBigEndian","linearPCMIsFloat","Dimensions","get","width","height","SPACING","AVATAR_SIZE","ITEM_SIZE","MessageView","firebase","db","firestore","settings","experimentalForceLongPolling","IMAGES","Popup","BookingDetailHeader","ImagePicker","VideoPlayerPopup","Permissions","DocumentPicker","Location","Camera","FileSystem","AntDesign","add","Chat","props","messages","setMessages","lan","setlan","isTyping","setisTyping","popupVisible","setpopupVisible","isRecording","setIsRecording","recording","setRecording","sound","setSound","playAudio","setPlayAudio","videoSource","setvideoSource","VideoPopup","setVideoPopup","query","setQuery","theaddress","settheaddress","updateData","data","console","log","alert","navigation","state","params","obj","val","latitude","longitude","sendLocationMessage","fun","getItem","address","locate","JSON","parse","user","customerid","toString","getLan","getGalleryPermissions","temp","collection","orderBy","onSnapshot","snapshot","docChanges","forEach","change","_id","key","doc","type","msg","timestamp","createdAt","text","senderId","receiverId","senderMobile","isDeleted","avatar","require","previousMessages","append","image","uri","location","error","d","Date","created","toISOString","err","result","newArr2","name","delayInMilliseconds","setTimeout","oldArray","getTime","Platform","OS","requestMediaLibraryPermissionsAsync","status","takePicture","navigate","onGoBack","uploadImagetofirebaseConsole","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","blob","current_time","ref","storage","child","put","on","TaskEvent","STATE_CHANGED","getDownloadURL","then","url","sendImageMessage","close","catch","e","path","messageIdGenerator","id","mobile","shared","onSend","map","v","startRecording","unloadAsync","setOnPlaybackStatusUpdate","requestPermissionsAsync","askAsync","AUDIO_RECORDING","audio_status","show","position","setAudioModeAsync","allowsRecordingIOS","interruptionModeIOS","INTERRUPTION_MODE_IOS_DO_NOT_MIX","playsInSilentModeIOS","shouldDuckAndroid","interruptionModeAndroid","INTERRUPTION_MODE_ANDROID_DO_NOT_MIX","playThroughEarpieceAndroid","staysActiveInBackground","_recording","Recording","prepareToRecordAsync","startAsync","stopRecording","stopAndUnloadAsync","getInfoAsync","getURI","info","stringify","playsInSilentLockedModeIOS","createNewLoadedSoundAsync","isLooping","isMuted","volume","rate","shouldCorrectPitch","_sound","uploadAudioFirebase","uriParts","split","fileType","length","contentType","sendAudio","pickImage","CAMERA","cameraPermission","CAMERA_ROLL","cameraRollPermission","MEDIA_LIBRARY","imageLibrary","permissionResult","launchImageLibraryAsync","cancelled","sendVideoMsg","video","replace","c","r","Math","random","renderInputToolbar","backgroundColor","borderTopWidth","sendLocation","LOCATION","chat","renderBubble","left","color","right","borderRadius","borderColor","borderBottomRightRadius","borderTopRightRadius","alignSelf","renderLoading","styles","loadingContainer","renderActions","flexDirection","justifyContent","onPressActionButton","marginLeft","marginTop","tintColor","MIC","renderTicks","currentMessage","alignItems","paddingRight","paddingBottom","CHECKED","renderFooter","marginBottom","paddingHorizontal","paddingVertical","renderSend","padding","SEND_ICON","SEND_ICON_AR","renderMessageVideo","renderCustomView","scrollToBottomComponent","renderMessage","flex","StatusBar","statusBarHeight","noGoBackLogin","goBack","style","StyleSheet","create","senderName","fontSize","fontWeight","onlineText","bottomComponentContainer"],"mappings":"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","sourcesContent":["// import React from \"react\";\n// import { GiftedChat } from \"react-native-gifted-chat\"; // 0.3.0\n\n// import Fire from \"./Fire\";\n\n// type Props = {\n//   name?: string\n// };\n\n// class Chat extends React.Component<Props> {\n//   static navigationOptions = ({ navigation }) => ({\n//     title: (navigation.state.params || {}).name || \"Chat!\"\n//   });\n\n//   state = {\n//     messages: []\n//   };\n\n//   get user() {\n//     return {\n//       name: this.props.navigation.state.params.name,\n//       _id: \"12\"\n//       // _id: Fire.shared.uid,\n//     };\n//   }\n\n//   render() {\n//     return (\n//       <GiftedChat\n//         messages={this.state.messages}\n//         onSend={Fire.shared.send}\n//         user={this.user}\n//       />\n//     );\n//   }\n\n//   componentDidMount() {\n//     Fire.shared.on(message =>\n//       this.setState(previousState => ({\n//         messages: GiftedChat.append(previousState.messages, message)\n//       }))\n//     );\n//   }\n//   componentWillUnmount() {\n//     Fire.shared.off();\n//   }\n// }\n\n// export default Chat;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  GiftedChat,\n  InputToolbar,\n  Bubble,\n  Send,\n  Message,\n} from \"react-native-gifted-chat\";\nimport {\n  View,\n  Text,\n  ActivityIndicator,\n  StyleSheet,\n  Image,\n  Platform,\n  SafeAreaView,\n  AsyncStorage,\n  TouchableOpacity,\n  Dimensions,\n  StatusBar,\n} from \"react-native\";\nimport { Toast } from \"native-base\";\n// import Toast from \"react-native-simple-toast\";\nimport Fire from \"./Fire\";\nimport Ionicons from \"react-native-vector-icons/Ionicons\";\n\nimport {\n  heightPercentageToDP as hp,\n  widthPercentageToDP as wp,\n} from \"react-native-responsive-screen\";\nimport CameraComponent from \"./Common/Camera\";\nconst recordingSettings = {\n  android: {\n    extension: \".m4a\",\n    outputFormat: Audio.RECORDING_OPTION_ANDROID_OUTPUT_FORMAT_MPEG_4,\n    audioEncoder: Audio.RECORDING_OPTION_ANDROID_AUDIO_ENCODER_AAC,\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000,\n  },\n  ios: {\n    extension: \".m4a\",\n    outputFormat: Audio.RECORDING_OPTION_IOS_OUTPUT_FORMAT_MPEG4AAC,\n    audioQuality: Audio.RECORDING_OPTION_IOS_AUDIO_QUALITY_MIN,\n    sampleRate: 44100,\n    numberOfChannels: 2,\n    bitRate: 128000,\n    linearPCMBitDepth: 16,\n    linearPCMIsBigEndian: false,\n    linearPCMIsFloat: false,\n  },\n};\nconst { width, height } = Dimensions.get(\"screen\");\nconst SPACING = (height / width) * 9;\nconst AVATAR_SIZE = (height / width) * 40;\nconst ITEM_SIZE = AVATAR_SIZE + SPACING * 3;\nimport MessageView from \"./CustomMessageView/MessageView\";\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nconst db = firebase.firestore();\n// import firebase from \"firebase/app\";\n// import \"firebase/storage\";\n// import * as firebase from \"firebase\";\ndb.settings({ experimentalForceLongPolling: true });\nimport { IMAGES } from \"../assets/Images\";\nimport Popup from \"./Common/Popup\";\nimport { Audio } from \"expo-av\";\nimport BookingDetailHeader from \"./Common/BookingDetailHeader\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport VideoPlayerPopup from \"./CustomMessageView/videoPlayerPopup\";\nimport * as Permissions from \"expo-permissions\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport * as Location from \"expo-location\";\nimport { Camera } from \"expo-camera\";\nimport * as FileSystem from \"expo-file-system\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport { add } from \"react-native-reanimated\";\n// import { GoogleMapScreen } from \"./address/mapScreen.js\";\nconst Chat = (props) => {\n  const [messages, setMessages] = useState([]);\n  const [lan, setlan] = useState(\"en\");\n  const [isTyping, setisTyping] = useState(false);\n  const [popupVisible, setpopupVisible] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recording, setRecording] = useState(null);\n  const [sound, setSound] = useState(null);\n  const [playAudio, setPlayAudio] = useState(false);\n\n  const [videoSource, setvideoSource] = useState(\"\");\n  const [VideoPopup, setVideoPopup] = useState(false);\n  const [query, setQuery] = useState(\"desc\");\n\n  const [theaddress, settheaddress] = useState(\"\");\n\n  const updateData = (data) => {\n    console.log(data);\n    alert(\"come back status: \" + data);\n    // some other stuff\n  };\n\n  useEffect(() => {\n    if (props.navigation.state.params.obj) {\n      let obj = props.navigation.state.params.obj;\n      console.log(props.navigation.state.params.obj);\n      let val = {\n        latitude: obj.latitude,\n        longitude: obj.longitude,\n      };\n      sendLocationMessage(val);\n    }\n    // GoogleMapScreen.printer();\n\n    const fun = async () => {\n      let address = await AsyncStorage.getItem(\"tempAddress\");\n      var locate = address ? JSON.parse(address) : \"\";\n      settheaddress(locate);\n      console.log(\"Fun Called\");\n    };\n\n    fun();\n\n    console.log(\n      \"user \",\n      props.navigation.state.params.user.customerid.toString()\n    );\n\n    // props.navigation.state.params.noGoBackLogin\n    getLan();\n    getGalleryPermissions();\n    let temp = [];\n\n    ////////////\n\n    /////////\n\n    db.collection(\n      \"-1\" + props.navigation.state.params.user.customerid.toString()\n    )\n      .orderBy(\"timestamp\") // ,query\n      .onSnapshot(\n        (snapshot) => {\n          // setQuery('asc')\n          snapshot.docChanges().forEach((change) => {\n            // console.log(\"message recieved real time \", change.doc.data());\n            const { key: _id } = change;\n            if (change.doc.data().type == \"text\") {\n              const msg = {\n                _id: change.doc.data()._id,\n                timestamp: change.doc.data().createdAt,\n                text: change.doc.data().text,\n                user: change.doc.data().user,\n                senderId: change.doc.data().senderId,\n                receiverId: change.doc.data().receiverId,\n                senderMobile: change.doc.data().senderMobile,\n                createdAt: change.doc.data().createdAt,\n                type: change.doc.data().type,\n                isDeleted: change.doc.data().isDeleted,\n              };\n              if (msg.user._id == -1) {\n                msg.user.avatar = require(\"../assets/Profile2-min.png\");\n              } else {\n                msg.user.avatar = require(\"../assets/Profile1-min.png\");\n              }\n              setMessages((previousMessages) =>\n                GiftedChat.append(previousMessages, msg)\n              );\n            } else if (change.doc.data().type == \"image\") {\n              const msg = {\n                _id: change.doc.data()._id,\n                timestamp: change.doc.data().createdAt,\n                text: change.doc.data().text,\n                user: change.doc.data().user,\n                senderId: change.doc.data().senderId,\n                receiverId: change.doc.data().receiverId,\n                senderMobile: change.doc.data().senderMobile,\n                createdAt: change.doc.data().createdAt,\n                image: change.doc.data().image,\n                type: change.doc.data().type,\n                isDeleted: change.doc.data().isDeleted,\n              };\n              if (msg.user._id == -1) {\n                msg.user.avatar = require(\"../assets/Profile2-min.png\");\n              } else {\n                msg.user.avatar = require(\"../assets/Profile1-min.png\");\n              }\n              setMessages((previousMessages) =>\n                GiftedChat.append(previousMessages, msg)\n              );\n            } else if (change.doc.data().type == \"audio\") {\n              const msg = {\n                _id: change.doc.data()._id,\n                timestamp: change.doc.data().createdAt,\n                text: change.doc.data().text,\n                user: change.doc.data().user,\n                senderId: change.doc.data().senderId,\n                receiverId: change.doc.data().receiverId,\n                senderMobile: change.doc.data().senderMobile,\n                createdAt: change.doc.data().createdAt,\n                uri: change.doc.data().uri,\n                type: change.doc.data().type,\n                isDeleted: change.doc.data().isDeleted,\n              };\n              if (msg.user._id == -1) {\n                msg.user.avatar = require(\"../assets/Profile2-min.png\");\n              } else {\n                msg.user.avatar = require(\"../assets/Profile1-min.png\");\n              }\n              setMessages((previousMessages) =>\n                GiftedChat.append(previousMessages, msg)\n              );\n            } else if (change.doc.data().type == \"location\") {\n              const msg = {\n                _id: change.doc.data()._id,\n                timestamp: change.doc.data().createdAt,\n                text: change.doc.data().text,\n                user: change.doc.data().user,\n                senderId: change.doc.data().senderId,\n                receiverId: change.doc.data().receiverId,\n                senderMobile: change.doc.data().senderMobile,\n                createdAt: change.doc.data().createdAt,\n                location: change.doc.data().location,\n                type: change.doc.data().type,\n                isDeleted: change.doc.data().isDeleted,\n              };\n              if (msg.user._id == -1) {\n                msg.user.avatar = require(\"../assets/Profile2-min.png\");\n              } else {\n                msg.user.avatar = require(\"../assets/Profile1-min.png\");\n              }\n              setMessages((previousMessages) =>\n                GiftedChat.append(previousMessages, msg)\n              );\n            }\n          });\n          // setMessages(temp);\n        },\n        (error) => {\n          //...\n        }\n      );\n\n    // db.collection(\n    //   \"-1\" + props.navigation.state.params.user.customerid.toString()\n    // )\n    //   // .orderBy('timestamp', 'asc')\n    //   .onSnapshot(snapshot => {\n    //     snapshot.docChanges().forEach(change => {\n    //      // console.log(\"message recieved real time \", change.doc.data());\n    //       if (change.doc.data().type) {\n    //         const { key: _id } = change;\n    //         if (change.doc.data().type == \"text\") {\n    //           const msg = {\n    //             _id: change.doc.data()._id,\n    //             timestamp: change.doc.data().createdAt,\n    //             text: change.doc.data().text,\n    //             user: change.doc.data().user,\n    //             senderId: change.doc.data().senderId,\n    //             receiverId: change.doc.data().receiverId,\n    //             senderMobile: change.doc.data().senderMobile,\n    //             createdAt: change.doc.data().createdAt\n    //           };\n    //           if (msg.user._id == -1) {\n    //             msg.user.avatar = require(\"../assets/Profile2-min.png\");\n    //           } else {\n    //             msg.user.avatar = require(\"../assets/Profile1-min.png\");\n    //           }\n    //           temp.push(msg);\n    //         } else if (change.doc.data().type == \"image\") {\n    //           const msg = {\n    //             _id: change.doc.data()._id,\n    //             timestamp: change.doc.data().createdAt,\n    //             text: change.doc.data().text,\n    //             user: change.doc.data().user,\n    //             senderId: change.doc.data().senderId,\n    //             receiverId: change.doc.data().receiverId,\n    //             senderMobile: change.doc.data().senderMobile,\n    //             createdAt: change.doc.data().createdAt,\n    //             image: change.doc.data().image\n    //           };\n    //           if (msg.user._id == -1) {\n    //             msg.user.avatar = require(\"../assets/Profile2-min.png\");\n    //           } else {\n    //             msg.user.avatar = require(\"../assets/Profile1-min.png\");\n    //           }\n    //           temp.push(msg);\n    //         } else if (change.doc.data().type == \"audio\") {\n    //           const msg = {\n    //             _id: change.doc.data()._id,\n    //             timestamp: change.doc.data().createdAt,\n    //             text: change.doc.data().text,\n    //             user: change.doc.data().user,\n    //             senderId: change.doc.data().senderId,\n    //             receiverId: change.doc.data().receiverId,\n    //             senderMobile: change.doc.data().senderMobile,\n    //             createdAt: change.doc.data().createdAt,\n    //             uri: change.doc.data().uri\n    //           };\n    //           if (msg.user._id == -1) {\n    //             msg.user.avatar = require(\"../assets/Profile2-min.png\");\n    //           } else {\n    //             msg.user.avatar = require(\"../assets/Profile1-min.png\");\n    //           }\n    //           temp.push(msg);\n    //         }\n    //         //  console.log('message listened in document ', msg);\n\n    //         // setMessages(previousMessages =>\n    //         //   GiftedChat.append(previousMessages, msg)\n    //         // );\n    //       }\n    //     });\n\n    //     // setMessages(temp);\n    //   }, (error) => {\n    //       console.log('error in firebase listening',error)\n    //   });\n\n    //   setMessages(temp);\n\n    let d = new Date();\n    let created = d.toISOString();\n\n    // const help_msg = {\n    //   _id: \"21a9a5ff-caf0-4dfa-b999-366cc888e094\",\n    //   createdAt: created, // \"2021-04-15T10:17:45.079Z\"\n    //   receiverId: \"12\",\n    //   senderId: \"-1\",\n    //   senderMobile: \"0568600000000\",\n    //   text: \"Welcome , How we may help you?\",\n    //   timestamp: created,\n    //   type: \"text\",\n    //   user: {\n    //     _id: -1,\n    //     avatar: 6,\n    //     name: \"Wafarnalak\",\n    //     // avatar: require(\"../assets/Profile2-min.png\"), //Wafarnalk logo\n    //   },\n    // };\n\n    // help_msg.user.avatar = require(\"../assets/Profile2-min.png\"); //Wafarnalk logo\n\n    // console.log(\"Help:\", help_msg);\n\n    // const help = {\n    //   _id: 0,\n    //   text: \"Welcome.\",\n    //   createdAt: new Date().getTime().toString(),\n    //   system: true,\n    // };\n\n    // setWelcome();\n\n    //setMessages((oldArray) => console.log(oldArray));\n\n    AsyncStorage.getItem(\"lan\", (err, result) => {\n      if (result) {\n        var newArr2 = {\n          _id: 1,\n          text:\n            result == \"en\"\n              ? \"Welcome to Wafarnalak Help care. How can we help you?\"\n              : \"مرحبا بك في مركز خدمة وفرنالك . كيف يمكننا مساعدتك؟\",\n          // \"مرحبا بك في مركز خدمة وفرنالك . كيف يمكننا مساعدتك؟\"\n          createdAt: new Date(),\n          isDeleted: false,\n          user: {\n            _id: -1,\n            name: \"Wafarnalak\",\n            avatar: require(\"../assets/Profile2-min.png\"),\n          },\n        };\n\n        var delayInMilliseconds = 2000; //1 second - 2000\n\n        setTimeout(function () {\n          //your code to be executed after 1 second\n          setMessages((oldArray) => [newArr2, ...oldArray]);\n\n          // console.log(messages, \"End\");\n        }, delayInMilliseconds);\n      }\n    });\n\n    // var delayInMillisecond = 1000; //1 second\n\n    // setTimeout(function () {\n    //   //your code to be executed after 1 second\n\n    //   console.log(messages, \"End\");\n    // }, delayInMillisecond);\n\n    console.log(new Date().getTime().toString());\n  }, [props.navigation]);\n\n  //useEffect(() => {\n  //   const setWelcome = async () => {\n  //     var newArr2 = {\n  //       _id: 1,\n  //       text: \"Hello developer\",\n  //       createdAt: new Date(),\n  //       user: {\n  //         _id: -1,\n  //         name: \"Wafarnalak\",\n  //         avatar: \"https://placeimg.com/140/140/any\",\n  //       },\n  //     };\n  //     console.log(\"on send call \", newArr2);\n  //     //Fire.shared.send(newArr2);\n\n  //     // await setMessages((prev) => GiftedChat.append(prev, newArr2));\n\n  //     // await setMessages(newArr2);\n\n  //     setMessages((oldArray) => [...oldArray, newArr2]);\n\n  //     //alert(messages);\n  //     console.log(\"Messages\", messages);\n\n  //     // alert(GiftedChat);\n  //   };\n\n  //   setWelcome();\n  // }, [messages]);\n\n  const getGalleryPermissions = async () => {\n    // const { stat } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n    if (Platform.OS !== \"web\") {\n      const { status } =\n        await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== \"granted\") {\n        alert(\"Sorry, we need camera roll permissions to make this work!\");\n      }\n    }\n  };\n  const takePicture = async () => {\n    console.log(\"hello\");\n    props.navigation.navigate(\"CameraComponent\", {\n      // onGoBack: sendImageMessage\n      onGoBack: uploadImagetofirebaseConsole,\n    });\n    // return <CameraComponent />;\n  };\n  const uploadImagetofirebaseConsole = async (image) => {\n    console.log(\"hello\", image); //image.uri\n    const blob = await new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = function () {\n        resolve(xhr.response);\n      };\n      xhr.onerror = function () {\n        reject(new TypeError(\"network request failed\"));\n      };\n      xhr.responseType = \"blob\";\n      xhr.open(\"GET\", image, true); //image.uri\n      xhr.send(null);\n    });\n    let d = new Date();\n    let current_time = d.toISOString();\n    const ref = firebase.storage().ref(\"/chatImages\").child(current_time);\n    const snapshot = ref.put(blob);\n    snapshot.on(\n      firebase.storage.TaskEvent.STATE_CHANGED,\n      () => {\n        console.log(\"success\");\n      },\n      (error) => {\n        console.log(\"error\", error);\n      },\n      () => {\n        snapshot.snapshot.ref\n          .getDownloadURL()\n          .then((url) => {\n            console.log(\"url\", url);\n            sendImageMessage(url);\n            blob.close();\n          })\n          .catch((e) => {\n            console.log(\"erreo\", e);\n          });\n      }\n    );\n    // firebase\n    //   .storage()\n    //   .ref(\"image123\")\n    //   .put(image.uri)\n    //   .then(snapshot => {\n    //     //You can check the image is now uploaded in the storage bucket\n    //     console.log(\"uploaded\");\n    //   })\n    //   .catch(e => console.log(\"uploading image error => \", e));\n  };\n  const sendImageMessage = useCallback(async (path) => {\n    let id = await messageIdGenerator();\n    console.log(\"id > \", id);\n    let msg = [\n      {\n        _id: id,\n        createdAt: new Date().getTime(),\n        receiverId: \"-1\",\n        senderId: props.navigation.state.params.user.customerid.toString(),\n        senderMobile: props.navigation.state.params.user.mobile,\n        text: \"\",\n        timestamp: new Date().getTime(),\n        image: path,\n        type: \"image\",\n        user: {\n          _id: props.navigation.state.params.user.customerid,\n          name: props.navigation.state.params.user.name,\n          avatar: require(\"../assets/Profile1-min.png\"),\n        },\n        isDeleted: false,\n      },\n    ];\n    // console.log(\"new msg \", msg);\n    Fire.shared.send(msg);\n  });\n  const onSend = useCallback(\n    (messages = []) => {\n      // setisTyping(true);\n\n      var newArr2 = messages.map((v) => ({\n        ...v,\n        senderId: props.navigation.state.params.user.customerid.toString(),\n        receiverId: \"-1\",\n        senderMobile: props.navigation.state.params.user.mobile,\n        isDeleted: false,\n        type: \"text\",\n      }));\n      // console.log(\"on send call \", newArr2);\n      Fire.shared.send(newArr2);\n      // var newArr2 = messages.map(v => ({\n      //   ...v,\n      //   sent: true,\n      //   received: true,\n      //   pending: false\n      // }));\n      // setMessages(previousMessages =>\n      //   GiftedChat.append(previousMessages, newArr2)\n      // );\n    },\n    [props.navigation]\n  );\n  async function startRecording() {\n    if (sound !== null) {\n      await sound.unloadAsync();\n      sound.setOnPlaybackStatusUpdate(null);\n      setSound(null);\n    }\n\n    console.log(\"Requesting permissions..\");\n    await Audio.requestPermissionsAsync();\n\n    // let { audio_status } = await Permissions.askAsync(Permissions.RECORD_AUDIO);\n    // if (audio_status !== \"granted\") {\n    //   Toast.show({\n    //     text:\n    //       this.state.lan == \"en\"\n    //         ? \"Please grant audio permissions\"\n    //         : \"Please grant audio permissions\",\n    //     position: \"bottom\",\n    //   });\n    //   await Permissions.askAsync(Permissions.AUDIO_RECORDING);\n    // }\n\n    let { audio_status } = await Permissions.askAsync(\n      Permissions.AUDIO_RECORDING\n    );\n    if (audio_status !== \"granted\") {\n      Toast.show({\n        text:\n          lan == \"en\"\n            ? \"Please grant audio permissions\"\n            : \"الرجاء منح أذونات الصوت\",\n        position: \"bottom\",\n      });\n      await Permissions.askAsync(Permissions.AUDIO_RECORDING);\n    }\n\n    await Audio.setAudioModeAsync({\n      allowsRecordingIOS: true,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n      playsInSilentModeIOS: true,\n      shouldDuckAndroid: true,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n      playThroughEarpieceAndroid: false,\n      staysActiveInBackground: true,\n    });\n    const _recording = new Audio.Recording();\n    try {\n      await _recording.prepareToRecordAsync(recordingSettings);\n      setRecording(_recording);\n      await _recording.startAsync();\n      console.log(\"recording\");\n      setIsRecording(true);\n    } catch (error) {\n      console.log(\"error while recording:\", error);\n    }\n    // try {\n    //   console.log(\"Requesting permissions..\");\n    //   await Audio.requestPermissionsAsync();\n    //   await Audio.setAudioModeAsync({\n    //     allowsRecordingIOS: true,\n    //     interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n    //     playsInSilentModeIOS: true,\n    //     shouldDuckAndroid: true,\n    //     interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX\n    //   });\n    //   console.log(\"Starting recording..\");\n    //   const recording = new Audio.Recording();\n    //   await recording.prepareToRecordAsync(\n    //     Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY\n    //   );\n    //   await recording.startAsync();\n    //   setRecording(recording);\n    //   console.log(\"Recording started\");\n    // } catch (err) {\n    //   console.error(\"Failed to start recording\", err);\n    // }\n  }\n\n  async function stopRecording() {\n    try {\n      await recording.stopAndUnloadAsync();\n    } catch (error) {\n      // Do nothing -- we are already unloaded.\n    }\n    const info = await FileSystem.getInfoAsync(recording.getURI());\n    console.log(`FILE INFO: ${JSON.stringify(info)}`);\n    await Audio.setAudioModeAsync({\n      allowsRecordingIOS: false,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n      playsInSilentModeIOS: true,\n      playsInSilentLockedModeIOS: true,\n      shouldDuckAndroid: true,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n      playThroughEarpieceAndroid: false,\n      staysActiveInBackground: true,\n    });\n    const { sound: _sound, status } = await recording.createNewLoadedSoundAsync(\n      {\n        isLooping: true,\n        isMuted: false,\n        volume: 1.0,\n        rate: 1.0,\n        shouldCorrectPitch: true,\n      }\n    );\n    setSound(_sound);\n    setIsRecording(false);\n    uploadAudioFirebase(_sound);\n    console.log(\"sound >>> \", _sound);\n    // console.log(\"Stopping recording..\");\n    // setRecording(undefined);\n    // await recording.stopAndUnloadAsync();\n    // const uri = recording.getURI();\n    // uploadAudioFirebase(uri, \"audio\", \"audio\");\n    // console.log(\"Recording stopped and stored at\", uri);\n  }\n  const uploadAudioFirebase = async (url, type, name) => {\n    const uri = recording.getURI();\n    try {\n      const blob = await new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.onload = () => {\n          try {\n            resolve(xhr.response);\n          } catch (error) {\n            console.log(\"error:\", error);\n          }\n        };\n        xhr.onerror = (e) => {\n          console.log(e);\n          reject(new TypeError(\"Network request failed\"));\n        };\n        xhr.responseType = \"blob\";\n        xhr.open(\"GET\", uri, true);\n        xhr.send(null);\n      });\n      if (blob != null) {\n        const uriParts = uri.split(\".\");\n        const fileType = uriParts[uriParts.length - 1];\n        let d = new Date();\n        let current_time = d.toISOString();\n        firebase\n          .storage()\n          .ref(\"/chatAudio\")\n          .child(`${current_time}.${fileType}`)\n          .put(blob, {\n            contentType: `audio/${fileType}`,\n          })\n          .then(async () => {\n            console.log(\"Sent!\");\n            const uri = await firebase\n              .storage()\n              .ref(\"/chatAudio\")\n              .child(`${current_time}.${fileType}`)\n              .getDownloadURL();\n            sendAudio(uri, \"audio\", \"audio\");\n            console.log(\"uri:\", uri);\n          })\n          .catch((e) => console.log(\"error:\", e));\n      } else {\n        console.log(\"erroor with blob\");\n      }\n    } catch (error) {\n      console.log(\"error:\", error);\n    }\n    // console.log(\"hello\", uri);\n    // const blob = await new Promise((resolve, reject) => {\n    //   const xhr = new XMLHttpRequest();\n    //   xhr.onload = function() {\n    //     resolve(xhr.response);\n    //   };\n    //   xhr.onerror = function() {\n    //     reject(new TypeError(\"network request failed\"));\n    //   };\n    //   xhr.responseType = \"blob\";\n    //   xhr.open(\"GET\", uri, true);\n    //   xhr.send(null);\n    // });\n    // let d = new Date();\n    // let current_time = d.toISOString();\n    // const ref = firebase\n    //   .storage()\n    //   .ref(\"/chatAudio\")\n    //   .child(current_time);\n    // const snapshot = ref.put(blob);\n    // snapshot.on(\n    //   firebase.storage.TaskEvent.STATE_CHANGED,\n    //   () => {\n    //     console.log(\"success\");\n    //   },\n    //   error => {\n    //     console.log(\"error\", error);\n    //   },\n    //   () => {\n    //     snapshot.snapshot.ref\n    //       .getDownloadURL()\n    //       .then(url => {\n    //         console.log(\"url\", url);\n    //         sendAudio(url, \"audio\", \"audio\");\n    //         blob.close();\n    //       })\n    //       .catch(e => {\n    //         console.log(\"erreo\", e);\n    //       });\n    //   }\n    // );\n  };\n  const sendAudio = useCallback(async (path, type, name) => {\n    let id = await messageIdGenerator();\n    // console.log(\"id > \", id);\n    let msg = [\n      {\n        _id: id,\n        createdAt: new Date().getTime().toString(),\n        receiverId: \"-1\",\n        senderId: props.navigation.state.params.user.customerid.toString(),\n        senderMobile: props.navigation.state.params.user.mobile,\n        text: \"\",\n        name: name,\n        timestamp: new Date().getTime().toString(),\n        uri: path,\n        type: type,\n        user: {\n          _id: props.navigation.state.params.user.customerid,\n          name: props.navigation.state.params.user.name,\n          avatar: require(\"../assets/Profile1-min.png\"),\n        },\n        isDeleted: false,\n      },\n    ];\n\n    // console.log(\"new msg \", msg);\n\n    Fire.shared.send(msg);\n    // setMessages(previousMessages => GiftedChat.append(previousMessages, msg));\n  });\n\n  const pickImage = async () => {\n    const { status: cameraPermission } = await Permissions.askAsync(\n      Permissions.CAMERA\n    );\n    const { status: cameraRollPermission } = await Permissions.askAsync(\n      Permissions.CAMERA_ROLL\n    );\n    const { status } = await Camera.requestPermissionsAsync();\n    const { status: imageLibrary } = await Permissions.askAsync(\n      Permissions.MEDIA_LIBRARY\n    );\n    let permissionResult =\n      await ImagePicker.requestMediaLibraryPermissionsAsync();\n    console.log(permissionResult, \"permissionResult\");\n    if (permissionResult.status == \"granted\") {\n      let result = await ImagePicker.launchImageLibraryAsync();\n      console.log(\"pickerResult \", result);\n      if (!result.cancelled) {\n        if (result.type == \"image\") {\n          uploadImagetofirebaseConsole(result.uri);\n        } else if (result.type == \"video\") {\n          sendVideoMsg(result.uri);\n        }\n      }\n    }\n\n    // try {\n    //   const pickerResponse = await DocumentPicker.getDocumentAsync();\n    //   if (pickerResponse.type === \"cancel\") {\n    //     console.log(pickerResponse);\n    //   } else if (pickerResponse.type === \"success\") {\n    //     console.log(pickerResponse);\n    //   } else {\n    //     console.log(pickerResponse);\n    //   }\n    // } catch (exception) {\n    //   console.log(`[DocumentPicker]: ${exception}`);\n    // }\n\n    // console.log(\"value\", cameraRollPermission, \" value_cam\", imageLibrary);\n    // let result = await ImagePicker.launchImageLibraryAsync({\n    //   mediaTypes: ImagePicker.MediaTypeOptions.Images,\n    //   allowsEditing: true,\n    //   aspect: [4, 3],\n    //   quality: 1\n    // });\n\n    // console.log(result);\n\n    // if (!result.cancelled) {\n    //   if (result.type == \"image\") {\n    //     sendImageMessage(result.uri);\n    //   } else if (result.type == \"video\") {\n    //     sendVideoMsg(result.uri);\n    //   }\n    // }\n    // if (\n    //   cameraRollPermission == \"granted\" &&\n    //   cameraRollPermission == \"granted\"\n    // ) {\n    //   console.log(\"image picker before\");\n    //   let pickerResult = await ImagePicker.launchImageLibraryAsync({\n    //     allowsEditing: true,\n    //     aspect: [4, 3]\n    //   });\n    //     if (!result.cancelled) {\n    //   if (result.type == \"image\") {\n    //     sendImageMessage(result.uri);\n    //   } else if (result.type == \"video\") {\n    //     sendVideoMsg(result.uri);\n    //   }\n    // }\n    //   console.log('pick result ',pickerResult)\n    // }\n  };\n  const sendVideoMsg = useCallback(async (path) => {\n    let id = await messageIdGenerator();\n    console.log(\"id > \", id);\n    let msg = {\n      _id: id,\n      createdAt: new Date().getTime(),\n      receiverId: \"-1\",\n      senderId: props.navigation.state.params.user.customerid.toString(),\n      senderMobile: props.navigation.state.params.user.mobile,\n      text: \"\",\n      timestamp: new Date().getTime(),\n      video: path,\n      user: {\n        _id: props.navigation.state.params.user.customerid,\n        name: props.navigation.state.params.user.name,\n        avatar: require(\"../assets/Profile1-min.png\"),\n      },\n    };\n    // console.log(\"new msg \", msg);\n    setMessages((previousMessages) => GiftedChat.append(previousMessages, msg));\n  });\n  const getLan = async () => {\n    let lan = await AsyncStorage.getItem(\"lan\");\n    setlan(lan !== null ? lan : \"en\");\n  };\n\n  const messageIdGenerator = () => {\n    // generates uuid.\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      let r = (Math.random() * 16) | 0,\n        v = c == \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  };\n\n  const renderInputToolbar = (props) => {\n    //Add the extra styles via containerStyle\n    return (\n      <InputToolbar\n        {...props}\n        containerStyle={{ backgroundColor: \"white\", borderTopWidth: hp(0.2) }}\n      />\n    );\n  };\n  //save single group message\n  const sendLocation = async () => {\n    let { status } = await Permissions.askAsync(Permissions.LOCATION);\n    console.log(\"status \", status);\n    if (status !== \"granted\") {\n      Toast.show({\n        text:\n          lan == \"en\"\n            ? \"Please allow location permission\"\n            : \"يرجى السماح بإذن الموقع\",\n        position: \"bottom\",\n      });\n    } else {\n      // console.log(\"else \");\n      props.navigation.navigate(\"GoogleMapScreen\", {\n        lan: \"en\",\n        // updateData: updateData(),\n        chat: \"true\",\n      });\n      console.log(\"after navigate\");\n      //await AsyncStorage.removeItem(\"tempAddress\");\n      // let address = await AsyncStorage.getItem(\"tempAddress\");\n      // // alert(\"Got Address\");\n      // let locate = address ? JSON.parse(address) : \"No\";\n      // console.log(\"location\", locate);\n\n      // const mylocation = await Location.getCurrentPositionAsync({});\n      // console.log(\"mylocation\", mylocation);\n      // if (theaddress != null && theaddress != \"\") {\n      let val = {\n        // latitude: mylocation.coords.latitude,\n        // longitude: mylocation.coords.longitude,\n        latitude: theaddress.latitude,\n        longitude: theaddress.longitude,\n      };\n      //await AsyncStorage.removeItem(\"tempAddress\");\n      console.log(\"If\", theaddress);\n\n      // sendLocationMessage(val);\n    }\n  };\n  const sendLocationMessage = async (location) => {\n    let id = await messageIdGenerator();\n    // console.log(\"id > \", id);\n    let msg = [\n      {\n        _id: id,\n        createdAt: new Date().getTime().toString(),\n        receiverId: \"-1\",\n        senderId: props.navigation.state.params.user.customerid.toString(),\n        senderMobile: props.navigation.state.params.user.mobile,\n        text: \"\",\n        name: \"location\",\n        timestamp: new Date().getTime().toString(),\n        location: location,\n        type: \"location\",\n        user: {\n          _id: props.navigation.state.params.user.customerid,\n          name: props.navigation.state.params.user.name,\n          avatar: require(\"../assets/Profile1-min.png\"),\n        },\n        isDeleted: false,\n      },\n    ];\n    Fire.shared.send(msg);\n    // console.log(\"new msg \", msg);\n    // setMessages(previousMessages => GiftedChat.append(previousMessages, msg));\n  };\n\n  // Just Created\n\n  // const playSound = async (uri) => {\n  //   setPlayAudio(true);\n\n  //   setPlayAudio(false);\n\n  //   console.log(uri);\n  //   // console.log(val.currentMessage.uri);\n\n  //   // const sound = new Audio.Sound();\n  //   // try {\n  //   //   await sound.loadAsync({ uri: props.currentMessage.uri });\n  //   //   await sound.playAsync();\n  //   //   // Your sound is playing!\n  //   //   console.log(\"Playing\");\n\n  //   //   // Don't forget to unload the sound from memory\n  //   //   // when you are done using the Sound object\n  //   //   await sound.unloadAsync();\n\n  //   setPlayAudio(false);\n  //   // } catch (error) {\n  //   //   // An error occurred!\n  //   //   console.log(error);\n  //   // }\n  // };\n\n  // renderAudio = (props) => {\n  //   console.log(\"Rendering\");\n  //   console.log(props.currentMessage);\n  //   return props.currentMessage.type != \"audio\" ? (\n  //     <View />\n  //   ) : (\n  //     <Ionicons\n  //       name=\"ios-play\"\n  //       size={35}\n  //       color={playAudio ? \"blue\" : \"red\"}\n  //       style={{\n  //         left: 90,\n  //         position: \"relative\",\n  //         shadowColor: \"#000\",\n  //         shadowOffset: { width: 0, height: 0 },\n  //         shadowOpacity: 0.5,\n  //         backgroundColor: \"transparent\",\n  //       }}\n  //       onPress={playSound(props.currentMessage.uri)}\n\n  //       // const sound = new Sound(props.currentMessage.audio, \"\", (error) => {\n  //       //   if (error) {\n  //       //     console.log(\"failed to load the sound\", error);\n  //       //   }\n  //       //     setPlayAudio(false);\n  //       //     sound.play((success) => {\n  //       //       console.log(success, \"success play\");\n  //       //       if (!success) {\n  //       //         Alert.alert(\"There was an error playing this audio\");\n  //       //       }\n  //       //     });\n  //       //   });\n  //       // }}\n  //     />\n  //   );\n  // };\n\n  // const playMic = async (uri) => {\n  //   console.log(uri);\n  //   console.log(\"TTT\");\n  // };\n\n  const renderBubble = (props) => {\n    // console.log(\"renderBubble\");\n    // {this.renderAudio(props)}\n\n    // return (\n    //   <View>\n    //     {/* {renderAudio(props)} */}\n\n    //     <Bubble {...props} style={{ borderRadius: 10 }} />\n    //   </View>\n    // );\n\n    // Uncomment\n    return (\n      <Bubble\n        {...props}\n        textStyle={{\n          left: {\n            color: \"#4a4b4c\",\n          },\n          right: {\n            color: \"white\",\n          },\n        }}\n        wrapperStyle={{\n          left: {\n            backgroundColor: \"#d6d6d6\",\n            borderRadius: 10,\n            borderColor: \"#c9c9c9\",\n          },\n          right: {\n            backgroundColor: \"#631255\",\n            borderBottomRightRadius: 10,\n            borderTopRightRadius: 10,\n            borderRadius: 10,\n          },\n        }}\n        tickStyle={{\n          color: \"white\",\n          height: 20,\n        }}\n        timeTextStyle={{\n          left: { color: \"#8b8d8f\", alignSelf: \"flex-end\" },\n          right: { color: \"#8b8d8f\" },\n        }}\n      />\n    );\n  };\n\n  function renderLoading() {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#6646ee\" />\n      </View>\n    );\n  }\n\n  function renderActions(props) {\n    return (\n      <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\n        <TouchableOpacity\n          style={{ justifyContent: \"flex-start\" }}\n          onPress={() => onPressActionButton()}\n        >\n          <Image\n            style={{\n              width: 30,\n              height: 50,\n              alignSelf: \"center\",\n              marginLeft: wp(1),\n              marginTop: -20,\n            }}\n            resizeMode=\"contain\"\n            source={require(\"../assets/Add-min.png\")}\n          />\n        </TouchableOpacity>\n        {/* Uncomment */}\n        <View>\n          <TouchableOpacity\n            style={{ justifyContent: \"flex-start\" }}\n            onPress={isRecording ? stopRecording : startRecording}\n          >\n            <Image\n              style={{\n                width: 30,\n                height: 50,\n                alignSelf: \"center\",\n                marginLeft: wp(2),\n                marginTop: -20,\n                // tintColor: recording ? \"#631255\" : \"black\"\n                tintColor: isRecording ? \"red\" : \"black\",\n              }}\n              resizeMode=\"contain\"\n              source={IMAGES.MIC}\n            />\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  }\n  function onPressActionButton(props) {\n    setpopupVisible(true);\n    //  console.log('hello Action button pressed ');\n  }\n  function renderTicks(currentMessage) {\n    // console.log(\"currentMessage  >> \", currentMessage);\n    if (currentMessage.user._id === 1) {\n      return (\n        <View\n          style={{\n            flexDirection: \"row\",\n            alignSelf: \"center\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            paddingRight: 5,\n            paddingBottom: 5,\n          }}\n        >\n          <Image\n            source={IMAGES.CHECKED}\n            resizeMode=\"contain\"\n            style={{\n              width: 10,\n              height: 10,\n              tintColor: \"white\",\n              alignSelf: \"center\",\n            }}\n          />\n          {/* <Image\n              source={IMAGES.CHECKED}\n              resizeMode=\"contain\"\n              style={{ width: 10, height: 10, tintColor: \"white\" }}\n            /> */}\n        </View>\n      );\n    }\n  }\n  function renderFooter(props) {\n    if (isTyping == true) {\n      return (\n        <View\n          style={{\n            backgroundColor: \"#d6d6d6\",\n            marginBottom: hp(2),\n            borderRadius: 25,\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            paddingHorizontal: \"5%\",\n            width: \"50%\",\n            alignSelf: \"center\",\n          }}\n        >\n          <Text\n            style={{\n              alignSelf: \"center\",\n              color: \"#8b8d8f\",\n              paddingVertical: \"5%\",\n            }}\n          >\n            Wafarnalak is typing...\n          </Text>\n        </View>\n      );\n    } else {\n      return <View></View>;\n    }\n  }\n  function renderSend(props) {\n    return (\n      <Send {...props}>\n        <View\n          style={{\n            height: \"100%\",\n            width: 50,\n            padding: 5,\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <Image\n            source={lan == \"en\" ? IMAGES.SEND_ICON : IMAGES.SEND_ICON_AR}\n            resizeMode=\"contain\"\n            style={{ height: 40, width: 40, alignSelf: \"center\" }}\n          />\n        </View>\n      </Send>\n    );\n  }\n  const renderMessageVideo = (props) => {\n    const { currentMessage } = props;\n    return (\n      <TouchableOpacity\n        onPress={() => {\n          setvideoSource(currentMessage.video);\n          setVideoPopup(true);\n        }}\n      >\n        <View style={{ padding: 10, height: 110, width: 190 }}>\n          <Image\n            source={{ uri: currentMessage.video }}\n            style={{ height: 98, width: 170 }}\n          />\n          {/* <VideoPlayer\n            resizeMode=\"contain\"\n            disableBack\n            disableVolume\n            // navigator={props.navigation}\n            source={{ uri: currentMessage.video }}\n            style={{ height: 98, width: 170 }}\n          /> */}\n        </View>\n      </TouchableOpacity>\n    );\n  };\n  const renderCustomView = (props) => {\n    return <MessageView {...props} />;\n  };\n\n  const scrollToBottomComponent = (props) => {\n    // console.log(props, \"pp\");\n\n    return (\n      <View>\n        {/* <TouchableOpacity\n          style={{ backgroundColor: \"red\" }}\n          {...props}\n          // onPress={props}\n          // hitSlop={{ top: 5, left: 5, right: 5, bottom: 5 }}\n        > */}\n        {/* <Text>VV</Text> */}\n        <AntDesign name=\"down\" size={24} color=\"black\" />\n        {/* </TouchableOpacity> */}\n      </View>\n    );\n  };\n\n  // const scrollToBottomComponent = (\n  //   <View>\n  //     <TouchableOpacity hitSlop={{ top: 5, left: 5, right: 5, bottom: 5 }}>\n  //       <Text>V</Text>\n  //     </TouchableOpacity>\n  //   </View>\n  // );\n\n  const renderMessage = (props) => {\n    if (\n      //!props.currentMessage.isDeleted\n\n      // !props.currentMessage.isDeleted ||\n      props.currentMessage.isDeleted == false\n    ) {\n      // console.log(\"Props\", props, \"Pops\");\n      return <Message {...props} />;\n    } else {\n      // console.log(\",,,,,\");\n      return null;\n    }\n  };\n  return (\n    <SafeAreaView\n      style={{\n        flex: 1,\n        backgroundColor: \"white\",\n        marginTop: StatusBar.statusBarHeight,\n      }}\n    >\n      <Popup\n        visible={popupVisible}\n        setPopupFalse={() => setpopupVisible(false)}\n        sendLocation={() => {\n          setpopupVisible(false);\n          sendLocation();\n        }}\n        pickDocument={() => {\n          setpopupVisible(false);\n          pickImage();\n        }}\n        uploadPicture={() => {\n          setpopupVisible(false);\n          pickImage();\n        }}\n        setTakePicture={() => {\n          setpopupVisible(false);\n          takePicture();\n        }}\n      />\n      <BookingDetailHeader\n        HeaderText={lan == \"en\" ? \"Chat\" : \"محادثة\"}\n        onBackPress={() =>\n          props.navigation.state.params.noGoBackLogin\n            ? props.navigation.navigate(\"LandingSecreen\")\n            : props.navigation.goBack()\n        }\n        lan={lan}\n        lineWidth={hp(0.2)}\n      />\n      <VideoPlayerPopup\n        visible={VideoPopup}\n        setPopupFalse={() => setVideoPopup(false)}\n        source={videoSource}\n      />\n      <GiftedChat\n        {...props}\n        messages={messages} //{messages.reverse()}\n        onSend={(messages) => onSend(messages)}\n        user={{\n          _id: props.navigation.state.params.user.customerid,\n          name: props.navigation.state.params.user.name,\n          avatar: require(\"../assets/Profile1-min.png\"),\n        }}\n        // renderInputToolbar={renderInputToolbar}\n        placeholder={\n          lan == \"en\"\n            ? \" Write a new message...\"\n            : \"        اكتب رسالة جديدة...       \"\n        }\n        textInputStyle={{\n          justifyContent: \"center\",\n          backgroundColor: \"white\",\n          // borderRadius: 10\n        }}\n        // renderTicks={renderTicks} // Issue infinite scroll\n        // isTyping={isTyping}\n        listViewProps={{\n          style: {\n            backgroundColor: \"#ebebeb\",\n          },\n        }}\n        renderMessageVideo={renderMessageVideo}\n        renderCustomView={renderCustomView}\n        renderBubble={renderBubble}\n        renderMessage={renderMessage}\n        showUserAvatar={true}\n        showAvatarForEveryMessage={true}\n        renderUsernameOnMessage={true}\n        alwaysShowSend\n        // inverted={true} //Commented false\n        scrollToBottom\n        scrollToBottomComponent={scrollToBottomComponent}\n        renderLoading={renderLoading}\n        isAnimated={true}\n        renderSend={renderSend}\n        renderActions={renderActions}\n        // onPressActionButton={() => onPressActionButton()}\n        // renderFooter={renderFooter}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  senderName: {\n    color: \"white\",\n    fontSize: 15,\n    fontWeight: \"bold\",\n  },\n  onlineText: {\n    color: \"#a2a2a2\",\n    marginLeft: 3,\n    fontSize: 12,\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  bottomComponentContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\nexport default Chat;\n\n// onDelete(messageIdToDelete) {\n//   this.setState(previousState =>\n//     ({ messages: previousState.messages.filter(message => message.id !== messageIdToDelete) }))\n// }\n\n// https://stackoverflow.com/questions/59284331/delete-and-copy-mesage-in-gifted-chat\n\n// renderMessage (props) {\n//   if(!props.currentMessage.isDeleted) {\n//   return (\n//     <Message\n//       {...props}\n//     />\n//   )\n// }\n// else return null;\n// }\n// But if message on firebase marked as isDeleted=true then the chat view NOT update itself automatically.\n// Do you know about this ?\n"]},"metadata":{},"sourceType":"module"}